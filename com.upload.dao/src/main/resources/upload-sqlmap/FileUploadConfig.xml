<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.upload.dao.FileUploadConfigDao">
<sql id="limit">
	<if test="startRow != null and endRow !=null">limit #{startRow},#{endRow}</if>
</sql>	
<sql id="orderCondition">
	<if test="orderColumn != null and orderColumn != ''">ORDER BY $orderColumn </if>
</sql>

<sql id="Condition">
	<where>
		<if test="id != null "><![CDATA[AND id =#{id}]]></if>		
		<if test="name != null "><![CDATA[AND name =#{name}]]></if>		
		<if test="code != null "><![CDATA[AND code =#{code}]]></if>		
		<if test="scode != null "><![CDATA[AND scode =#{scode}]]></if>		
		<if test="proposer != null "><![CDATA[AND proposer =#{proposer}]]></if>		
		<if test="loginName != null "><![CDATA[AND login_name =#{loginName}]]></if>		
		<if test="fileType != null "><![CDATA[AND file_type =#{fileType}]]></if>		
		<if test="createTime != null "><![CDATA[AND create_time =#{createTime}]]></if>		
		<if test="updateTime != null "><![CDATA[AND update_time =#{updateTime}]]></if>		
		<if test="httpDown != null "><![CDATA[AND http_down =#{httpDown}]]></if>
		<if test="delStatus != null "><![CDATA[AND del_status =#{delStatus}]]></if>
	</where>
</sql>
<sql id="columns">
	id as id ,name as name ,code as code ,scode as scode ,proposer as proposer ,login_name as loginName ,file_type as fileType ,create_time as createTime ,update_time as updateTime ,del_status as delStatus ,http_down as httpDown
</sql>
<insert id="insert" parameterType="fileUploadConfig"  keyProperty = "id" useGeneratedKeys = "true">
  	insert into file_config
  	(id,name,code,scode,proposer,login_name,file_type,create_time,update_time,del_status,http_down)
  	values
  	(#{id},#{name},#{code},#{scode},#{proposer},#{loginName},#{fileType},#{createTime},#{updateTime},#{delStatus},#{httpDown})
  	<selectKey keyProperty="id" resultType="long" order="AFTER">
select last_insert_id() 
</selectKey> 
</insert>

<delete id="del" parameterType="long"> 
        delete   file_config  set is_del=2 where id = #{id}
</delete> 
  
<update id="update" parameterType="fileUploadConfig">
	update file_config 
  	<set>
  				<if test="name != null "><![CDATA[ name =#{name},]]></if>		
  				<if test="code != null "><![CDATA[ code =#{code},]]></if>		
  				<if test="scode != null "><![CDATA[ scode =#{scode},]]></if>		
  				<if test="proposer != null "><![CDATA[ proposer =#{proposer},]]></if>		
  				<if test="loginName != null "><![CDATA[ login_name =#{loginName},]]></if>		
  				<if test="fileType != null "><![CDATA[ file_type =#{fileType},]]></if>		
  				<if test="createTime != null "><![CDATA[ create_time =#{createTime},]]></if>		
  				<if test="updateTime != null "><![CDATA[ update_time =#{updateTime},]]></if>		
  				<if test="httpDown != null "><![CDATA[ http_down =#{httpDown},]]></if>	
  				<if test="delStatus != null "><![CDATA[ del_status =#{delStatus},]]></if>
  	</set> 
    where  id=#{id}
  </update> 
  <select id="queryCount" parameterType="fileUploadConfig" resultType="int">
        select count(1) from file_config 
        <include refid="Condition"/>
  </select> 
  <select id="query" parameterType="fileUploadConfig" resultType="fileUploadConfig">
        select 
         <include refid="columns"/>
		from file_config 
        <include refid="Condition"/>
        <include refid="limit"/>        
  </select> 
  </mapper>
